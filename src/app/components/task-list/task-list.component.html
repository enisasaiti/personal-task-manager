<div class="task-list">

  <div class="filter-bar">
    <input
      type="text"
      placeholder="🔍 Search by title..."
      [(ngModel)]="searchTerm"
    />
  </div>

  <p>📝 You have {{ getRemainingTasksCount() }} tasks left to complete.</p>

  <h2>To Do</h2>
  <ul>
    <li *ngFor="let task of getTasksByStatus('To Do')">
      <ng-container *ngIf="editingTaskId === task.id; else viewMode">
        <input [(ngModel)]="editedTitle" placeholder="Task title" />
        <input [(ngModel)]="editedDueDate" type="date" />
        <button (click)="saveEdit(task)">✅ Save</button>
        <button (click)="cancelEdit()">❌ Cancel</button>
      </ng-container>

      <ng-template #viewMode>
        {{ task.title }} ({{ task.dueDate | date:'shortDate' }})
        <button (click)="markAsDone(task.id)">✔ Done</button>
        <button (click)="startEditing(task)">✏️ Edit</button>
        <button (click)="deleteTask(task.id)">🗑 Delete</button>
      </ng-template>
    </li>
  </ul>

  <h2>In Progress</h2>
  <ul>
    <li *ngFor="let task of getTasksByStatus('In Progress')">
      {{ task.title }} ({{ task.dueDate | date:'shortDate' }})
    </li>
  </ul>

  <h2>Done</h2>
  <ul>
    <li *ngFor="let task of getTasksByStatus('Done')">
      {{ task.title }} ({{ task.dueDate | date:'shortDate' }})
    </li>
  </ul>
</div>
